language: python
python:
- '3.6'
- '3.7'
- '3.8'
install:
- pip install -r requirements.txt
- pip install -r test-requirements.txt
- pip install codecov wheel cmarkgfm
- pip install --upgrade pytest
script:
- python setup.py test
after_script:
- bash <(curl -Ls https://coverage.codacy.com/get.sh) report -r reports/coverage.xml -l Python
- codecov
deploy:
  provider: pypi
  user: "smart-gardena-token"
  password:
    secure: "TKZD5W+FGIqOQrrUE2gxFaic63h0a1Z/v6rdraPmuR3kY98ZrrXttSpP+Z8CisRJU76trcRHpifZV54JCsj+TfB62OOaZdFc5hPRZoqX8PBp/yI6ve1q3QLjJQ7n8vp5EcEi+Bv37rzV7NZ+7F8emaF/FuhfRN8nw2U8mhjPRjK9eSYoeaFY5EngrRmOkEqSKqUNxDHuekkrKIDlzMhiihRvJNjn9t3u5yLK40tAyUMVWb3B556/aD9h/gOQJ5vOmqiTGe7060L7xBx9cnL8mrGCaDie5eLEI8gvLss7YWEVmwg2MScCq03FQ9+4ebRzO7OJasmfWQhlU0hezZPliZ7rTcGM88mpnkI9UPLK8c4fdj/LIoqqIcutoEFNWTixJPeerlBIrwQegumG5nbPPhzlcNGKMj4fs8oRovvLPi1TcdeFUYmuUZOF3FjY+AygxHA38Jw7YD0XcPwzvhkCqGyXUWDi/dkHz9oV2kCdpSyj6ixcodAsplTpQs5zzf4DDLQk0jvA9LJYUg18bLIe4JnYiTFFh6n6es4h/JwmUjh/K/9nKFQlAkdsZVFjWrZF0EBjfjdKZbd6kE8L64J8zgWrGc5hN7p/JgqtAlCbOBq7GdRefYG9Z8OSIWmCKwXTDfoTeUFwNUu4frY4uEJ7slRrzGCRd7lZNI3EMgd5rLs="
  on:
    tags: true
    branch: master
    python: '3.7'
  distributions: register sdist bdist_wheel
